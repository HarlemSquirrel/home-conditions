<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Home Temperature</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">
      <h1>Home Temperatures</h1>

      <div class="chart"></div>

      <table class="table">
        <thead>
          <th>Timestamp</th>
          <th>Location</th>
          <th>Temp(C)</th>
          <th>Temp(F)</th>
        </thead>
        <tbody>
          {% for row in temps: %}
          <tr>
            <td>{{ row[0] }}</td>
            <td>{{ row[1] }}</td>
            <td>{{ row[2] }}</td>
            <td>{{ row[3] }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript">
      {% timestamps = [i[0] for i in temps] %}
      {% temps = [i[2] for i in temps] %}
      var timestamps = {{ timestamps|safe }}
      var temps = {{ temps|safe }}
      var data = [
        {
          name: 'Temperatures',
          x: timestamps,
          y: temps,
          type: 'scatter'
        }
      ];

      Plotly.newPlot('myDiv', data);
    </script>
  </body>
</html>
